<!DOCTYPE html>
<html lang="en">

<!-- layout.ejs-->
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Adelaide">
    <meta name="author" content="xt">
    <meta name="keyword" content="">
    <link rel="canonical" href="https://taoshengxu.github.io/hexo/hexo/2018/05/15/2018-05-15_R_environment/">
    <link rel="shortcut icon" href="/hexo/img/favicon.png">
    <link rel="alternate" type="application/atom+xml" title="IIM" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="/hexo/js/search.js"></script>

    <title>
        
        R包安装路径设置及从Bioconductor安装包,BiocCheck｜undefined
        
    </title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" href="/hexo/css/main.css">

    
      <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
      <link rel="stylesheet" href="/hexo/css/highlight.css">
    

    

    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


    

    

    


    
  


    




    <script async defer src="https://buttons.github.io/buttons.js"></script>

<link rel="stylesheet" href="/hexo/css/prism-solarizedlight.css" type="text/css">
<link rel="stylesheet" href="/hexo/css/prism-line-numbers.css" type="text/css"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<style>
    header.intro-header {
        background-image: url('/hexo/img/northernlights-sisimiut-lake.jpg')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<!-- hexo-inject:begin --><!-- hexo-inject:end --><header>
  <nav class="navbar navbar-default header-navbar" id="nav-top" data-ispost="true" data-istags="false" data-ishome="false">
    <div class="container-fluid">
      <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle" data-toggle="collapse" aria-expanded="false" data-target="#website_navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <span class="navbar-brand animated pulse">
          <a class="brand-logo" href="/hexo/">
                <img src="/hexo/img/banner.jpg?h=350&amp;auto=compress&amp;cs=tinysrgb">
          </a>
        </span>
      </div>

      <div class="collapse navbar-collapse" id="website_navbar">
          <ul class="nav navbar-nav navbar-right">
              
                <li>
                  <a href="/hexo/">home</a>
                </li>
              
                <li>
                  <a href="/hexo/archives/">archives</a>
                </li>
              
                <li>
                  <a href="/hexo/categories/">categories</a>
                </li>
              
                <li>
                  <a href="/hexo/tags/">tags</a>
                </li>
              
                <li>
                  <a href="/hexo/columns/">columns</a>
                </li>
              
          </ul>
      </div>
  </div></nav>


  
    <style>
       .intro-header {
          background-image: url('/hexo/img/northernlights-sisimiut-lake.jpg');
      }
    </style>

    <div class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                    <div class="site-heading">
                        <h1>R包安装路径设置及从Bioconductor安装包,BiocCheck</h1>
                        
                        

                        
                          <span class="meta">
                               <span class="meta-item">Author: xt</span>
                               <span class="meta-item">Date: May 15, 2018</span>
                               
                          </span>
                          <div class="tags text-center">
                              Categories: 
                          </div>
                          <div class="tags text-center">
                              Tags: 
                          </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
  
</header>


<!-- Main Content -->
<!-- post.ejs -->
<article>
    <div class="container">
      <div class="col-lg-8 col-lg-offset-1 col-sm-9">
          
          <span class="post-count">510 words in total, 3 minutes required.</span>
          <hr>
          
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="设置临时安装路径"><a href="#设置临时安装路径" class="headerlink" title="设置临时安装路径"></a>设置临时安装路径</h1><blockquote>
<p>.libPaths()<br>.libPaths(.libPaths()[2])</p>
</blockquote>
<h1 id="设置永久安装路径"><a href="#设置永久安装路径" class="headerlink" title="设置永久安装路径"></a>设置永久安装路径</h1><p>windows设置环境变量</p>
<ul>
<li>新建系统环境变量R_LIBS ,值为自定义R包安装目录。</li>
<li>重启R,在R中运行.libPaths()即可查看设置是否生效。</li>
</ul>
<blockquote>
<p>R_LIBS=D:/R_Library</p>
</blockquote>
<p>Linux 设置</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$  R_LIBS=<span class="string">"/usr/lib/R/Library"</span> R -q -e <span class="string">'print(.libPaths())'</span></span><br></pre></td></tr></table></figure>
<h1 id="R-编译不通过"><a href="#R-编译不通过" class="headerlink" title="R 编译不通过"></a>R 编译不通过</h1><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">Sys</span><span class="selector-class">.setenv</span>(<span class="string">"PKG_CXXFLAGS"</span>=<span class="string">"-std=c++11"</span>)</span><br></pre></td></tr></table></figure>
<h1 id="BiocCheck"><a href="#BiocCheck" class="headerlink" title="BiocCheck"></a>BiocCheck</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dir=<span class="string">"D:/xxx_0.99.7.tar.gz"</span></span><br><span class="line"><span class="function"><span class="title">BiocCheck</span><span class="params">(dir)</span></span></span><br></pre></td></tr></table></figure>
<p><em>By default that the directory gets cleaned up as long as there aren’t any errors. If you want it to stick around (to check warnings, for instance) you can enable that under Tools &gt; Global Options &gt; Packages   “Cleanup output after successful R CMD check” option.</em></p>
<h1 id="R从bioconductor安装包"><a href="#R从bioconductor安装包" class="headerlink" title="R从bioconductor安装包"></a>R从bioconductor安装包</h1><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">source</span><span class="params">(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</span></span></span><br><span class="line"><span class="function"><span class="title">options</span><span class="params">(BioC_mirror=<span class="string">"http://mirrors.ustc.edu.cn/bioc/"</span>)</span></span></span><br><span class="line">我的做法是把上述两句放到 ~/<span class="selector-class">.Rprofile</span> 的，但是有时候网速慢导致 source 这一步很慢，结果就是启动 R 需要几秒钟或者报错。</span><br><span class="line">最后我直接自定义函数：</span><br><span class="line">source<span class="selector-class">.bio</span> &lt;- function()&#123;</span><br><span class="line">	source(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</span><br><span class="line">	options(BioC_mirror=<span class="string">"http://mirrors.ustc.edu.cn/bioc/"</span>)</span><br><span class="line">&#125;</span><br><span class="line">然后仍然放到 ~/<span class="selector-class">.Rprofile</span> ，然后需要装 Bioconductor 的包的时候先运行一下 source.bio() 就好了。</span><br><span class="line">最后，如果你用 Windows 系统的话，上述文件换成 C:\Program Files\R\R-<span class="number">3.4</span>.<span class="number">2</span>\etc\Rprofile<span class="selector-class">.site</span> 这个文件。</span><br><span class="line"></span><br><span class="line">链接：https:<span class="comment">//www.zhihu.com/question/63601255/answer/360879580</span></span><br></pre></td></tr></table></figure>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">local(&#123;</span><br><span class="line">  options( repos  = <span class="string">"https://mirrors.ustc.edu.cn/CRAN/"</span> )</span><br><span class="line">  options( BioC_mirror = <span class="string">"https://mirrors.ustc.edu.cn/bioc/"</span> )</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">bioPackages &lt;- </span><br><span class="line">  c( </span><br><span class="line">    <span class="string">"dplyr"</span>, <span class="string">"stringi"</span>, <span class="string">"purrr"</span>, <span class="comment">## ERROR</span></span><br><span class="line">    <span class="string">"R.utils"</span>, <span class="string">"data.table"</span>, <span class="comment">## unzip and read table</span></span><br><span class="line">    <span class="string">"GEOquery"</span>, <span class="comment">## download</span></span><br><span class="line">    <span class="string">"FactoMineR"</span>, <span class="string">"factoextra"</span>, <span class="string">"ggfortify"</span>, <span class="comment">## PCA</span></span><br><span class="line">    <span class="string">"pheatmap"</span>, <span class="comment">## heatmap</span></span><br><span class="line">    <span class="string">"ggplot2"</span>, <span class="comment">## Volcano plot</span></span><br><span class="line">    <span class="string">"limma"</span>, <span class="string">"DESeq2"</span>, <span class="string">"edgeR"</span>, <span class="comment">## DEG</span></span><br><span class="line">    <span class="string">"clusterProfiler"</span>, <span class="string">"org.Hs.eg.db"</span>, <span class="comment">## annotation</span></span><br><span class="line">    <span class="string">"pathview"</span> <span class="comment">## kegg</span></span><br><span class="line">  )</span><br><span class="line"><span class="comment"># Step3 Install the packages ----------------------------------------------</span></span><br><span class="line">lapply( bioPackages, </span><br><span class="line">        <span class="keyword">function</span>(bioPackage) &#123;</span><br><span class="line">          <span class="keyword">if</span> ( !<span class="keyword">require</span>( bioPackage, character.only = <span class="literal">T</span> ) ) &#123;</span><br><span class="line">            CRANpackages &lt;- available.packages()</span><br><span class="line">            </span><br><span class="line">            <span class="comment">## install packages by CRAN</span></span><br><span class="line">            <span class="keyword">if</span> ( bioPackage %<span class="keyword">in</span>% rownames( CRANpackages ) ) &#123;</span><br><span class="line">              install.packages( bioPackage )</span><br><span class="line">              </span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">              <span class="comment">## install packages by bioconductor</span></span><br><span class="line">              <span class="comment">## R version &gt;= 3.5 ===&gt; BiocManager</span></span><br><span class="line">              <span class="keyword">if</span> ( as.character( sessionInfo()$R.version$minor ) &gt;= <span class="number">3.5</span> ) &#123;</span><br><span class="line">                <span class="keyword">if</span> (!requireNamespace(<span class="string">"BiocManager"</span>, quietly = <span class="literal">TRUE</span>))</span><br><span class="line">                  install.packages(<span class="string">"BiocManager"</span>)</span><br><span class="line">                BiocManager::install(bioPackage, update = <span class="literal">TRUE</span>, ask = <span class="literal">FALSE</span>)</span><br><span class="line">              &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="comment">## R version &lt; 3.5 ===&gt; BiocInstaller</span></span><br><span class="line">                <span class="keyword">if</span> (!requireNamespace(<span class="string">"BiocInstaller"</span>, quietly = <span class="literal">TRUE</span>))</span><br><span class="line">                  <span class="keyword">source</span>( <span class="string">"https://bioconductor.org/biocLite.R"</span> )</span><br><span class="line">                BiocInstaller::biocLite( bioPackage, ask = <span class="literal">FALSE</span>)</span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

          
          <hr>
          <ul class="pager no-print">
              
              <li class="previous">
                  <a href="/hexo/2018/05/18/2018-05-18_r-appveyor/" data-toggle="tooltip" data-placement="left" title="R-appveyor设置">&larr; Previous Post</a>
              </li>
              
              
              <li class="next">
                  <a href="/hexo/2018/04/11/2018-04-11_Rdatabase/" data-toggle="tooltip" data-placement="top" title="R语言数据库操作">Next Post&rarr;</a>
              </li>
              
          </ul>
          
  <br>

  


      </div>
      
  <div class="hidden-xs col-sm-3 toc-col">
    <div class="toc-wrap">
        Table of Contents
        
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#设置临时安装路径"><span class="toc-number">1.</span> <span class="toc-text">设置临时安装路径</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#设置永久安装路径"><span class="toc-number">2.</span> <span class="toc-text">设置永久安装路径</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#R-编译不通过"><span class="toc-number">3.</span> <span class="toc-text">R 编译不通过</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#BiocCheck"><span class="toc-number">4.</span> <span class="toc-text">BiocCheck</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#R从bioconductor安装包"><span class="toc-number">5.</span> <span class="toc-text">R从bioconductor安装包</span></a></li></ol>
        
    </div>
  </div>


    </div>
</article>

<!-- Footer -->
<!-- footer.ejs -->
<footer class="no-print">

    <div class="text-center">

        <ul class="list-inline">
            
            
            

            

            

            

            

            

        </ul>
        <div class="text-muted copyright">
            &copy;
            
            2017 - 2020
            
            -
            xt
            <br>
            
            
            
            | 
            <p>
                <span id="busuanzi_container_site_pv"><span id="busuanzi_value_site_pv"></span> <b>PV</b></span> -
                <span id="busuanzi_container_site_uv"><span id="busuanzi_value_site_uv"></span> <b>UV</b></span> -
                146.4k <b>Words</b>
        </p></div>

        <div class="search-container">
            <form class="site-search-form">
                <span class="glyphicon glyphicon-search"></span>
                <input type="text" id="local-search-input" class="st-search-input" placeholder="Search...">
            </form>
            <div id="local-search-result" class="local-search-result-cls"></div>
        </div>
        <script type="text/javascript" id="local.search.active">
            var inputArea = document.querySelector("#local-search-input");
            inputArea.onclick = function () {
                var root = "/hexo/";
                getSearchFile(root);
                this.onclick = null
            }
            inputArea.onkeydown = function () {
                if (event.keyCode == 13) return false
            }
        </script>

    </div>
</footer>

<!-- Custom Theme JavaScript -->
<script src="/hexo/js/main.js"></script>

<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) {
            o.addEventListener('load', function (e) {
                c(null, e);
            }, false);
        }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



</body>

</html>
