<!DOCTYPE html>
<html lang="en">

<!-- layout.ejs-->
<head><meta name="generator" content="Hexo 3.8.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Adelaide">
    <meta name="author" content="xt">
    <meta name="keyword" content="">
    <link rel="canonical" href="https://taoshengxu.github.io/hexo/hexo/2018/12/21/2018-12-2_String_process/">
    <link rel="shortcut icon" href="/hexo/img/favicon.png">
    <link rel="alternate" type="application/atom+xml" title="IIM" href="/atom.xml">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
    <script src="/hexo/js/search.js"></script>

    <title>
        
        R语言字符串处理汇总｜undefined
        
    </title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" href="/hexo/css/main.css">

    
      <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
      <link rel="stylesheet" href="/hexo/css/highlight.css">
    

    

    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>


    
      <meta name="google-site-verification" content="xxx">
    

    

    


    
  


    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-xxxxxx-xx', 'auto');
    ga('send', 'pageview');
</script>



<script>
    var _baId = 'xxx';
    // Originial
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?" + _baId;
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>



    <script async defer src="https://buttons.github.io/buttons.js"></script>

<link rel="stylesheet" href="/hexo/css/prism-solarizedlight.css" type="text/css">
<link rel="stylesheet" href="/hexo/css/prism-line-numbers.css" type="text/css"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<style>
    header.intro-header {
        background-image: url('/hexo/img/northernlights-sisimiut-lake.jpg')
    }
</style>
<!-- hack iOS CSS :active style -->
<body ontouchstart="" class="animated fadeIn">
<!-- hexo-inject:begin --><!-- hexo-inject:end --><header>
  <nav class="navbar navbar-default header-navbar" id="nav-top" data-ispost="true" data-istags="false" data-ishome="false">
    <div class="container-fluid">
      <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle" data-toggle="collapse" aria-expanded="false" data-target="#website_navbar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <span class="navbar-brand animated pulse">
          <a class="brand-logo" href="/hexo/">
                <img src="/hexo/img/banner.jpg?h=350&amp;auto=compress&amp;cs=tinysrgb">
          </a>
        </span>
      </div>

      <div class="collapse navbar-collapse" id="website_navbar">
          <ul class="nav navbar-nav navbar-right">
              
                <li>
                  <a href="/hexo/">home</a>
                </li>
              
                <li>
                  <a href="/hexo/archives/">archives</a>
                </li>
              
                <li>
                  <a href="/hexo/categories/">categories</a>
                </li>
              
                <li>
                  <a href="/hexo/tags/">tags</a>
                </li>
              
                <li>
                  <a href="/hexo/columns/">columns</a>
                </li>
              
          </ul>
      </div>
  </div></nav>


  
    <style>
       .intro-header {
          background-image: url('/hexo/img/northernlights-sisimiut-lake.jpg');
      }
    </style>

    <div class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 text-center">
                    <div class="site-heading">
                        <h1>R语言字符串处理汇总</h1>
                        
                        

                        
                          <span class="meta">
                               <span class="meta-item">Author: xt</span>
                               <span class="meta-item">Date: Dec 21, 2018</span>
                               
                          </span>
                          <div class="tags text-center">
                              Categories: 
                          </div>
                          <div class="tags text-center">
                              Tags: 
                          </div>
                        
                    </div>
                </div>
            </div>
        </div>
    </div>
  
</header>


<!-- Main Content -->
<!-- post.ejs -->
<article>
    <div class="container">
      <div class="col-lg-8 col-lg-offset-1 col-sm-9">
          
          <span class="post-count">2,289 words in total, 10 minutes required.</span>
          <hr>
          
          <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/hint.css/2.4.1/hint.min.css"><h1 id="字符翻译"><a href="#字符翻译" class="headerlink" title="字符翻译"></a>字符翻译</h1><ul>
<li><p>tolower(),</p>
</li>
<li><p>toupper()</p>
</li>
<li><p>chartr()</p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dna &lt;-<span class="string">"AgCTaaGGGcctTagct"</span></span><br><span class="line"><span class="function"><span class="title">chartr</span><span class="params">(<span class="string">"T"</span>, <span class="string">"U"</span>, dna)</span></span>#将T碱基替换成U碱基</span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="字符串连接"><a href="#字符串连接" class="headerlink" title="字符串连接"></a>字符串连接</h1><ul>
<li><p>paste (…, sep = “ “, collapse = NULL)</p>
</li>
<li><p>paste0(…, collapse = NULL)</p>
<p><em>sep:     a character string to separate the terms.</em></p>
<p><em>collapse: an optional character string to separate the results.</em></p>
</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">paste(<span class="string">"control"</span>, <span class="number">1</span>:<span class="number">3</span>, sep =<span class="string">"_"</span>)</span><br><span class="line"><span class="comment">## [1] "control_1" "control_2" "control_3"</span></span><br><span class="line">x &lt;- list(a =<span class="string">"aa"</span>, b =<span class="string">"bb"</span>)</span><br><span class="line">y &lt;- list(c =<span class="number">1</span>, d =<span class="number">2</span>)</span><br><span class="line">paste(x, y, sep =<span class="string">"-"</span>)</span><br><span class="line"><span class="comment">## [1] "aa-1" "bb-2"</span></span><br><span class="line">paste(x, y, sep =<span class="string">"-"</span>, collapse =<span class="string">";"</span>)</span><br><span class="line"><span class="comment">## [1] "aa-1;bb-2"</span></span><br><span class="line">paste(x, collapse =<span class="string">":"</span>)</span><br><span class="line"><span class="comment">## [1] "aa:bb"</span></span><br></pre></td></tr></table></figure>
<p><strong>特殊应用场景</strong>：对应一个矩阵x, 按行连接矩阵元素(以“#”分隔)并生成一个向量.</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">paste(x, collapse = <span class="string">'#'</span>)</span><br></pre></td></tr></table></figure>
<h1 id="字符串替换"><a href="#字符串替换" class="headerlink" title="字符串替换"></a>字符串替换</h1><ul>
<li><p>gsub(pattern, replacement, x, ignore.case = FALSE, perl = FALSE, fixed = FALSE, useBytes = FALSE)</p>
<p><em>gsub()是对向量里面的每个元素进行搜素，如果发现元素里面有多个位置匹配了模式，则全部进行替换.</em></p>
</li>
</ul>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">text &lt;- c(<span class="string">"we are the world"</span>, <span class="string">"we are the children"</span>) </span><br><span class="line">gsub(<span class="string">"w"</span>, <span class="string">"W"</span>, text)</span><br><span class="line"><span class="comment"># [1] "We are the World"    "We are the children" </span></span><br><span class="line">gsub(<span class="string">" "</span>, <span class="string">""</span>, <span class="string">"abc def ghi"</span>)</span><br><span class="line"><span class="comment"># [1] "abcdefghi"</span></span><br></pre></td></tr></table></figure>
<h1 id="字符串查找"><a href="#字符串查找" class="headerlink" title="字符串查找"></a>字符串查找</h1><ul>
<li><p>grep(pattern, x, ignore.case= F, perl= F, value= F, fixed= F, useBytes= F, invert= F</p>
<p><em>返回向量x中哪个元素匹配了模式pattern（即返回了向量x的某些下标）或者具体哪个元素匹配了模式（通过设置value参数来完成）</em></p>
</li>
<li><p>grepl(pattern, x, ignore.case= F, perl= F, fixed= F, useBytes= F) </p>
<p><em>返回一系列逻辑值，其长度等同于向量x的长度，表示向量x中的元素是否匹配了模式。</em></p>
<p><code>以上两个函数都没有提供具体的位置信息，即向量x中的元素在哪个位置匹配了模式。</code></p>
</li>
<li><p>regexpr(pattern, text, ignore.case = FALSE, perl = FALSE, fixed = FALSE, useBytes = FALSE)</p>
<p><em>查找每个向量中每个元素第一个匹配的位置，返回值是向量</em></p>
</li>
<li><p>regexec(pattern, text, ignore.case = FALSE, fixed = FALSE, useBytes = FALSE)</p>
<p> <em>查找每个向量中每个元素第一个匹配的位置，返回值是list</em></p>
</li>
<li><p><strong>gregexpr</strong>(pattern, text, ignore.case = FALSE, perl = FALSE, fixed = FALSE, useBytes = FALSE)</p>
<p> <strong><em>查找向量中每个元素所有能匹配的位置，返回值是list。 这个函数最常用☆</em></strong></p>
</li>
</ul>
<p>​       <em><code>以上三个返回的结果中包含了匹配的具体位置和字符串长度信息（因此可用于字符串的提取操作中去）</code></em></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## 非常清晰的示例程序</span></span><br><span class="line">text &lt;- c(<span class="string">"We are the world"</span>, <span class="string">"we are the children"</span>)</span><br><span class="line">grep(<span class="string">"We"</span>, text)<span class="comment">#向量text中的哪些元素匹配了单词'We'</span></span><br><span class="line"><span class="comment">## [1] 1</span></span><br><span class="line">grep(<span class="string">"We"</span>, text, invert =<span class="literal">T</span>)<span class="comment">#向量text中的哪些元素没有匹配单词'We'</span></span><br><span class="line"><span class="comment">## [1] 2</span></span><br><span class="line">grep(<span class="string">"we"</span>, text, ignore.case =<span class="literal">T</span>)<span class="comment">#匹配时忽略大小写</span></span><br><span class="line"><span class="comment">## [1] 1 2</span></span><br><span class="line">grepl(<span class="string">"We"</span>, text)<span class="comment">#向量text中的每个元素是否匹配了单词'We'，即只返回TRUE或FALSE</span></span><br><span class="line"><span class="comment">## [1] TRUE FALSE</span></span><br><span class="line"></span><br><span class="line">regexpr(<span class="string">"e"</span>, text)</span><br><span class="line"><span class="comment">## [1] 2 2</span></span><br><span class="line"><span class="comment">## attr(,"match.length")</span></span><br><span class="line"><span class="comment">## [1] 1 1</span></span><br><span class="line"><span class="comment">## attr(,"useBytes")</span></span><br><span class="line"><span class="comment">## [1] TRUE</span></span><br><span class="line"></span><br><span class="line">regexec(<span class="string">"e"</span>, text) </span><br><span class="line"><span class="comment">## [[1]]</span></span><br><span class="line"><span class="comment">## [1] 2</span></span><br><span class="line"><span class="comment">## attr(,"match.length")</span></span><br><span class="line"><span class="comment">## [1] 1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## [[2]]</span></span><br><span class="line"><span class="comment">## [1] 2</span></span><br><span class="line"><span class="comment">## attr(,"match.length")</span></span><br><span class="line"><span class="comment">## [1] 1</span></span><br><span class="line"></span><br><span class="line">gregexpr(<span class="string">"e"</span>, text)</span><br><span class="line"><span class="comment">## [[1]]</span></span><br><span class="line"><span class="comment">## [1]  2  6 10</span></span><br><span class="line"><span class="comment">## attr(,"match.length")</span></span><br><span class="line"><span class="comment">## [1] 1 1 1</span></span><br><span class="line"><span class="comment">## attr(,"useBytes")</span></span><br><span class="line"><span class="comment">## [1] TRUE</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## [[2]]</span></span><br><span class="line"><span class="comment">## [1]  2  6 10 18</span></span><br><span class="line"><span class="comment">## attr(,"match.length")</span></span><br><span class="line"><span class="comment">## [1] 1 1 1 1</span></span><br><span class="line"><span class="comment">## attr(,"useBytes")</span></span><br><span class="line"><span class="comment">## [1] TRUE</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##另外一个例子</span></span><br><span class="line">gregexpr(pattern =<span class="string">'2'</span>,<span class="string">"the2quickbrownfoxeswere2tired"</span>)</span><br><span class="line"><span class="keyword">library</span>(stringr)</span><br><span class="line">str_locate_all(pattern =<span class="string">'2'</span>, <span class="string">"the2quickbrownfoxeswere2tired"</span>)</span><br><span class="line"><span class="comment">##[[1]]</span></span><br><span class="line"><span class="comment">##     start end</span></span><br><span class="line"><span class="comment">##[1,]     4   4</span></span><br><span class="line"><span class="comment">##[2,]    24  24</span></span><br><span class="line">lapply(strsplit(x, <span class="string">''</span>), <span class="keyword">function</span>(x) which(x == <span class="string">'2'</span>))</span><br></pre></td></tr></table></figure>
<h3 id="完全匹配"><a href="#完全匹配" class="headerlink" title="完全匹配"></a>完全匹配</h3><p> match(x, table, nomatch= NAinteger, incomparables)</p>
<p><em>只有参数x的内容被完全匹配，函数才会返回参数x所在table参数中的下标，否则的话会返回nomatch参数中定义的值（默认是NA）</em></p>
<p>此外还有一个charmatch()或者pmatch()，其命令形式类似于match。同样该函数也会返回其匹配字符串所在table中的下标，该函数在进行匹配时，会从table里字符串的最左面（即第一个字符）开始匹配，如果起始位置没有匹配则返回NA；如果同时部分匹配和完全匹配，则会优先选择完全匹配；如果同时有多个完全匹配或者多个部分匹配时，则会返回0；如果以上三个都没有，则返回NA。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">text &lt;- c(<span class="string">"We are the world"</span>, <span class="string">"we are the children"</span>, <span class="string">"we"</span>) </span><br><span class="line">match(<span class="string">"we"</span>, text)</span><br><span class="line"><span class="comment"># [1] 3 </span></span><br><span class="line">match(<span class="number">2</span>, c(<span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">8</span>))</span><br><span class="line"><span class="comment"># [1] 3 </span></span><br><span class="line">match(<span class="string">"xx"</span>, c(<span class="string">"abc"</span>, <span class="string">"xxx"</span>, <span class="string">"xx"</span>, <span class="string">"xx"</span>))<span class="comment">#只会返回第一个完全匹配的元素的下标</span></span><br><span class="line"><span class="comment"># [1] 3 </span></span><br><span class="line">match(<span class="string">"xx"</span>, c(<span class="string">"abc"</span>, <span class="string">"xxx"</span>))<span class="comment"># 没有完全匹配的，因此返回NA</span></span><br><span class="line"><span class="comment"># [1] NA </span></span><br><span class="line"></span><br><span class="line">charmatch(<span class="string">"xx"</span>, c(<span class="string">"abc"</span>, <span class="string">"xxa"</span>))</span><br><span class="line"><span class="comment"># [1] 2 </span></span><br><span class="line">charmatch(<span class="string">"xx"</span>, c(<span class="string">"abc"</span>, <span class="string">"axx"</span>))<span class="comment"># 从最左面开始匹配</span></span><br><span class="line"><span class="comment"># [1] NA </span></span><br><span class="line">charmatch(<span class="string">"xx"</span>, c(<span class="string">"xxa"</span>, <span class="string">"xxb"</span>))<span class="comment"># 不唯一</span></span><br><span class="line"><span class="comment"># [1] 0 </span></span><br><span class="line">charmatch(<span class="string">"xx"</span>, c(<span class="string">"xxa"</span>, <span class="string">"xxb"</span>, <span class="string">"xx"</span>))<span class="comment"># 优先选择完全匹配，尽管有两个部分匹配</span></span><br><span class="line"><span class="comment"># [1] 3 </span></span><br><span class="line">charmatch(<span class="number">2</span>, c(<span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">8</span>))</span><br><span class="line"><span class="comment"># [1] 3 </span></span><br><span class="line">charmatch(<span class="number">2</span>, c(<span class="number">3</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">8</span>, <span class="number">2</span>))</span><br><span class="line"><span class="comment"># [1] 0</span></span><br></pre></td></tr></table></figure>
<h3 id="多重查找"><a href="#多重查找" class="headerlink" title="多重查找"></a>多重查找</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x &lt;- sample(<span class="number">1</span>:<span class="number">10</span>,<span class="number">20</span>,replace=<span class="literal">TRUE</span>)</span><br><span class="line">x </span><br><span class="line"><span class="comment"># [1]8 6 9 9 7 3 2 5 5 1 6 8 5 2 9 3 5 1 0 8 2</span></span><br><span class="line">inds &lt;- which(x %<span class="keyword">in</span>% c(<span class="number">8</span>,<span class="number">9</span>))</span><br><span class="line">inds</span><br><span class="line"><span class="comment"># [1]1 3 4 1 2 1 5 1 9</span></span><br><span class="line">x[inds]</span><br><span class="line"><span class="comment"># [1]8 9 9 8 9 8</span></span><br></pre></td></tr></table></figure>
<h3 id="查找所有重复项"><a href="#查找所有重复项" class="headerlink" title="查找所有重复项"></a>查找所有重复项</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vec &lt;- c(<span class="string">"a"</span>,<span class="string">"b"</span>,<span class="string">"c"</span>,<span class="string">"c"</span>,<span class="string">"c"</span>)  </span><br><span class="line">vec[duplicated(vec)| duplicated(vec, fromLast=<span class="literal">TRUE</span>)]</span><br><span class="line"><span class="comment">## [1] "c" "c" "c"</span></span><br></pre></td></tr></table></figure>
<h3 id="比较两个向量"><a href="#比较两个向量" class="headerlink" title="比较两个向量"></a>比较两个向量</h3><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#compare two vector in R</span></span><br><span class="line">all( vector1, vetor2 )</span><br><span class="line">isTRUE(all.equal(D,E))</span><br></pre></td></tr></table></figure>
<h1 id="字符串分割"><a href="#字符串分割" class="headerlink" title="字符串分割"></a>字符串分割</h1><figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">strsplit(x, split, fixed = <span class="literal">FALSE</span>, perl = <span class="literal">FALSE</span>, useBytes = <span class="literal">FALSE</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li><p><em>参数x为字符串格式向量，函数依次对向量的每个元素进行拆分</em></p>
</li>
<li><p><em>参数split为拆分位置的字串向量，即在哪个字串处开始拆分；该参数默认是正则表达式匹配；若设置fixed= T则表示是用普通文本匹配或者正则表达式的精确匹配。用普通文本来匹配的运算速度要快些。</em></p>
</li>
<li><p><em>参数perl的设置和perl的版本有关，表示可以使用perl语言里面的正则表达式。如果正则表达式过长，则可以考虑使用perl的正则来提高运算速度。</em></p>
</li>
<li><p>*参数useBytes表示是否逐字节进行匹配，默认为FALSE，表示是按字符匹配而不是按字节进行匹配</p>
</li>
</ul>
<p><code>strsplit()的返回结果是list类型，如果想将其转换成字符串类型，则可以使用上面提到的unlist()和as.character()。有一种特殊情况，如果strsplit()的split参数为空字符串的话，得函数的返回结果是一个个字符。</code></p>
<p><strong>特殊应用场景</strong>：对于输入是一个字符串vector, 取每一个元素拆分的第二位置的数据。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(plyr)</span><br><span class="line">gene=c(<span class="string">"1 KRT19"</span>, <span class="string">"2 AGR2"</span>,<span class="string">"3 RAB25"</span>, <span class="string">"4 CDH1"</span>,<span class="string">"5 ERBB3"</span>)</span><br><span class="line">gene=ldply(strsplit(gene, split = <span class="string">" "</span>))[[<span class="number">2</span>]]</span><br></pre></td></tr></table></figure>
<h1 id="字符串提取"><a href="#字符串提取" class="headerlink" title="字符串提取"></a>字符串提取</h1><ul>
<li><p>substr(x, start, stop)</p>
<p><em>返回字符串个数等于第一个向量的长度</em></p>
</li>
<li><p>substring(text, first, last)</p>
</li>
</ul>
<p>​      <em>返回的字符串个数等于其三个参数中长度最长的那个参数的长度</em></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">x &lt;-<span class="string">"123456789"</span> </span><br><span class="line">substr(x, c(<span class="number">2</span>, <span class="number">4</span>), c(<span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>))</span><br><span class="line"><span class="comment"># [1] "234" </span></span><br><span class="line">substring(x, c(<span class="number">2</span>, <span class="number">4</span>), c(<span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>))</span><br><span class="line"><span class="comment"># [1] "234"     "45"      "2345678" </span></span><br><span class="line">y &lt;- c(<span class="string">"12345678"</span>, <span class="string">"abcdefgh"</span>)</span><br><span class="line">substr(y, c(<span class="number">2</span>, <span class="number">4</span>), c(<span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>))</span><br><span class="line"><span class="comment"># [1] "234" "de" </span></span><br><span class="line">substring(y, c(<span class="number">2</span>, <span class="number">4</span>), c(<span class="number">4</span>, <span class="number">5</span>, <span class="number">8</span>))</span><br><span class="line"><span class="comment"># [1] "234"     "de"      "2345678"</span></span><br></pre></td></tr></table></figure>
<p>从上面的输出结果来，向量x的长度为1，substr()不管后面的两个参数的长度如何，它只会用到这两个参数的第一个数值，即分别为2和4，表示提取的起始和终止位置分别为2和4，返回的结果则是字符串“234”。而用substring()来提取时，则会依据参数最长的last参数，此外还需要注意的是first和last两个参数的长度不等，这时会用到R里面的“短向量循环”原则，参数first会自动延长为c(2, 4, 2)，函数会依次提取从2到4，从4到5，从2到8这三个字符串。</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#用substing()可以很方便地把DNA或RNA序列进行翻译（三个碱基转换成一个密码子）。</span></span><br><span class="line">dna &lt;- paste(sample(c(<span class="string">"A"</span>, <span class="string">"G"</span>, <span class="string">"C"</span>, <span class="string">"T"</span>), <span class="number">12</span>, replace =<span class="literal">T</span>), collapse =<span class="string">""</span>) </span><br><span class="line">dna </span><br><span class="line"><span class="comment"># [1] "ATAACGCGTGGG" </span></span><br><span class="line">substring(dna, seq(<span class="number">1</span>, <span class="number">10</span>, by =<span class="number">3</span>), seq(<span class="number">3</span>, <span class="number">12</span>, by =<span class="number">3</span>))</span><br><span class="line"><span class="comment"># [1] "ATA" "ACG" "CGT" "GGG"</span></span><br></pre></td></tr></table></figure>
<h2 id="字符串的定制输出"><a href="#字符串的定制输出" class="headerlink" title="字符串的定制输出"></a>字符串的定制输出</h2><ul>
<li><p>strtrim(x, width)</p>
<p><em>将字符串修剪到特定的显示宽度</em></p>
</li>
<li><p>strwrap(x, width, indent= 0, exdent= 0, prefix= “”, simplify= T, initial= prefix)</p>
<p> <em>把字符串当成一个段落来处理（不管段落中是否有换行），按照段落的格式进行缩进和分行，返回结果就是  一行行的字符串.</em></p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">strtrim(c(<span class="string">"abcde"</span>, <span class="string">"abcde"</span>, <span class="string">"abcde"</span>), c(<span class="number">1</span>, <span class="number">5</span>, <span class="number">10</span>))</span><br><span class="line"><span class="comment">## [1] "a"     "abcde" "abcde"</span></span><br><span class="line">strtrim(c(<span class="number">1</span>, <span class="number">123</span>, <span class="number">12345</span>), <span class="number">4</span>)<span class="comment">#短向量循环</span></span><br><span class="line"><span class="comment">## [1] "1"    "123"  "1234"</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h1 id="其他处理技巧汇总"><a href="#其他处理技巧汇总" class="headerlink" title="其他处理技巧汇总"></a>其他处理技巧汇总</h1><p>1,查找 NA</p>
<figure class="highlight lisp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">which(<span class="name">is</span>.na(<span class="name">vector</span>))</span><br><span class="line">any(<span class="name">is</span>.na(<span class="name">data</span>))</span><br></pre></td></tr></table></figure>
<p>2, <strong>生成一个限定长度带名字的list</strong> </p>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mylist<span class="selector-class">.names</span> &lt;- c(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>)</span><br><span class="line">mylist &lt;- vector(<span class="string">"list"</span>, length(mylist.names))</span><br><span class="line"><span class="function"><span class="title">names</span><span class="params">(mylist)</span></span> &lt;- mylist.names</span><br></pre></td></tr></table></figure>
<p>3,  矩阵和向量按行乘</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">MyMatrix &lt;- matrix(c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">13</span>), nrow =<span class="number">2</span>, ncol=<span class="number">3</span>, byrow=<span class="literal">TRUE</span>)</span><br><span class="line">MyVector &lt;- c(<span class="number">1</span>:<span class="number">3</span>)</span><br><span class="line"><span class="comment"># You could use either:</span></span><br><span class="line">t(t(MyMatrix)* MyVector)</span><br><span class="line"><span class="comment"># or:</span></span><br><span class="line">MyMatrix %*% diag(MyVector)</span><br></pre></td></tr></table></figure>
<p>4,通过字符串取对象的值</p>
<figure class="highlight r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ret_series &lt;- c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>);</span><br><span class="line">x &lt;-<span class="string">"ret_series"</span>;</span><br><span class="line">get(x)</span><br><span class="line"></span><br><span class="line"><span class="comment">#相反功能</span></span><br><span class="line">assign(name[i],feature_cox_result_order)</span><br><span class="line">a =<span class="number">1</span></span><br><span class="line">get(<span class="string">'a'</span>)</span><br><span class="line"><span class="comment">#To use it with save:</span></span><br><span class="line">to_be_saved_obj = paste(<span class="string">"mat"</span>, a, sep =<span class="string">"_"</span>) </span><br><span class="line">save(list = to_be_saved_obj, file =<span class="string">'mat.Rdata'</span>)</span><br></pre></td></tr></table></figure>

          
          <hr>
          <ul class="pager no-print">
              
              <li class="previous">
                  <a href="/hexo/2018/12/22/2018-12-2_R_applyfunction/" data-toggle="tooltip" data-placement="left" title="R Apply函数">&larr; Previous Post</a>
              </li>
              
              
              <li class="next">
                  <a href="/hexo/2018/12/21/2018-12-2_GSVA/" data-toggle="tooltip" data-placement="top" title="GSVA基因集合变异分析">Next Post&rarr;</a>
              </li>
              
          </ul>
          
  <br>

  


      </div>
      
  <div class="hidden-xs col-sm-3 toc-col">
    <div class="toc-wrap">
        Table of Contents
        
          <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#字符翻译"><span class="toc-number">1.</span> <span class="toc-text">字符翻译</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#字符串连接"><span class="toc-number">2.</span> <span class="toc-text">字符串连接</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#字符串替换"><span class="toc-number">3.</span> <span class="toc-text">字符串替换</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#字符串查找"><span class="toc-number">4.</span> <span class="toc-text">字符串查找</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#完全匹配"><span class="toc-number">4.0.1.</span> <span class="toc-text">完全匹配</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#多重查找"><span class="toc-number">4.0.2.</span> <span class="toc-text">多重查找</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查找所有重复项"><span class="toc-number">4.0.3.</span> <span class="toc-text">查找所有重复项</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#比较两个向量"><span class="toc-number">4.0.4.</span> <span class="toc-text">比较两个向量</span></a></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#字符串分割"><span class="toc-number">5.</span> <span class="toc-text">字符串分割</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#字符串提取"><span class="toc-number">6.</span> <span class="toc-text">字符串提取</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#字符串的定制输出"><span class="toc-number">6.1.</span> <span class="toc-text">字符串的定制输出</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#其他处理技巧汇总"><span class="toc-number">7.</span> <span class="toc-text">其他处理技巧汇总</span></a></li>
        
    </div>
  </div>


    </div>
</article>

<!-- Footer -->
<!-- footer.ejs -->
<footer class="no-print">

    <div class="text-center">

        <ul class="list-inline">
            
            
            

            

            

            

            

            

        </ul>
        <div class="text-muted copyright">
            &copy;
            
            2017 - 2019
            
            -
            xt
            <br>
            
            
            
            | 
            <p>
                <span id="busuanzi_container_site_pv"><span id="busuanzi_value_site_pv"></span> <b>PV</b></span> -
                <span id="busuanzi_container_site_uv"><span id="busuanzi_value_site_uv"></span> <b>UV</b></span> -
                112.8k <b>Words</b>
        </p></div>

        <div class="search-container">
            <form class="site-search-form">
                <span class="glyphicon glyphicon-search"></span>
                <input type="text" id="local-search-input" class="st-search-input" placeholder="Search...">
            </form>
            <div id="local-search-result" class="local-search-result-cls"></div>
        </div>
        <script type="text/javascript" id="local.search.active">
            var inputArea = document.querySelector("#local-search-input");
            inputArea.onclick = function () {
                var root = "/hexo/";
                getSearchFile(root);
                this.onclick = null
            }
            inputArea.onkeydown = function () {
                if (event.keyCode == 13) return false
            }
        </script>

    </div>
</footer>

<!-- Custom Theme JavaScript -->
<script src="/hexo/js/main.js"></script>

<!-- async load function -->
<script>
    function async(u, c) {
        var d = document, t = 'script',
            o = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        o.src = u;
        if (c) {
            o.addEventListener('load', function (e) {
                c(null, e);
            }, false);
        }
        s.parentNode.insertBefore(o, s);
    }
</script>

<!--fastClick.js -->
<script>
    async("//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function () {
        var $nav = document.querySelector("nav");
        if ($nav) FastClick.attach($nav);
    })
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->



</body>

</html>
